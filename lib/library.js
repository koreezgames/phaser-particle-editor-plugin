!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("library",[],t):"object"==typeof exports?exports.library=t():e.library=t()}(this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createImageFromBitmapData=function(e,t,r,i,a){var n=new Image;n.src=t,n.onload=function(){e.cache.addImage(r,t,n),i()},n.onerror=function(){a&&a()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createImageFromBitmapData=t.PPEParticle=void 0;var i=r(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),n=r(0);t.PPEParticle=a.default,t.createImageFromBitmapData=n.createImageFromBitmapData},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(3),s=function(e){return e&&e.__esModule?e:{default:e}}(o),l=r(0),u=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this.game=t,this._parent=r,this._parentUpdate=this._parent.update.bind(this._parent),this._parent.update=this._update.bind(this),this._emitersMap=new Map,this._collidebleEmitters=new Set,this._emitX=0,this._emitY=0,this._arcade=this.game.physics.arcade,null!==a&&this._initEmitters(a)}return n(e,[{key:"_initEmitters",value:function(e){var t=e.emitters;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];this.addEmitter(r,i)}}},{key:"_createEmitter",value:function(e,t){return new s.default(this.game,e,t)}},{key:"_add",value:function(e,t,r){this._parent.add(e,t,r),this._emitersMap.set(e.name,e)}},{key:"_remove",value:function(e,t,r){this._parent.remove(e,t,r),this._emitersMap.delete(e.name)}},{key:"_emit",value:function(e,t){t.enabled&&(t.flow?e.flow(t.lifespan,t.frequency,t.quantity,t.total,t.immediate):e.start(t.explode,t.lifespan,t.frequency,t.total))}},{key:"_update",value:function(){this._parentUpdate();var e=!0,t=!1,r=void 0;try{for(var i,a=this._collidebleEmitters[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var n=i.value;this._arcade.collide(n)}}catch(e){t=!0,r=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw r}}}},{key:"_onEmitterImageUpdate",value:function(e,t){this._recreateEmitter(e,t)}},{key:"_recreateEmitter",value:function(e,t){this.removeEmitter(e),this.addEmitter(e,t)}},{key:"addEmitter",value:function(e,t){var r=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,l.createImageFromBitmapData)(this.game,t[e],e,function(){var a=r._createEmitter(e,t);r._add(a),a.makeParticles(a.name,t.frames,500,t.collide,t.collideWorldBounds),r.updateEmitterProperties(e,t),i&&r._emit(a,t),t.collide||t.collideWorldBounds?r._collidebleEmitters.add(a):r._collidebleEmitters.delete(a)})}},{key:"removeEmitter",value:function(e){this._remove(this._emitersMap.get(e))}},{key:"updateEmitterImage",value:function(e,t){(0,l.createImageFromBitmapData)(this.game,t[e],e,this._onEmitterImageUpdate.bind(this,e,t))}},{key:"updateEmitterProperties",value:function(e,t){var r=this._emitersMap.get(e);r.applyProperties(t),this._emit(r,t)}},{key:"updateEmitterOption",value:function(e,t){this._recreateEmitter(e,t)}},{key:"x",get:function(){return this._parent.x},set:function(e){this._parent.x=e}},{key:"y",get:function(){return this._parent.y},set:function(e){this._parent.y=e}},{key:"emitX",get:function(){return this._emitX},set:function(e){this._emitX=e;var t=!0,r=!1,i=void 0;try{for(var n,o=this._emitersMap[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value,l=a(s,2),u=(l[0],l[1]);u.emitX=u.properties.emitX+this.emitX}}catch(e){r=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"emitY",get:function(){return this._emitY},set:function(e){this._emitY=e;var t=!0,r=!1,i=void 0;try{for(var n,o=this._emitersMap[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value,l=a(s,2),u=(l[0],l[1]);u.emitY=u.properties.emitY+this.emitY}}catch(e){r=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw i}}}}]),e}();t.default=u,e.exports=t.default},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.emitX,n.emitY,n.maxParticles));return o.name=r,o.applyProperties(n),o}return n(t,e),o(t,[{key:"applyProperties",value:function(e){this.properties=e,this.gravity.x=e.gravityX,this.gravity.y=e.gravityY,this.setRotation(e.rotationMin,e.rotationMax),this.emitX=e.emitX,this.emitY=e.emitY,this.maxParticles=e.maxParticles,this.setAlpha(e.alphaMin,e.alphaMax,e.alphaRate,Phaser.Easing[e.alphaEase][e.alphaEaseMode],e.alphaYoyo),e.proportional?(this.minParticleScale=e.minScale,this.maxParticleScale=e.maxScale):this.setScale(e.scaleFromX,e.scaleToX,e.scaleFromY,e.scaleToY,e.scaleRate,Phaser.Easing[e.scaleEase][e.scaleEaseMode],e.scaleYoyo),this.minParticleSpeed.setTo(e.minSpeedX,e.minSpeedY),this.maxParticleSpeed.setTo(e.maxSpeedX,e.maxSpeedY),this.lifespan=e.lifespan,this.angularDrag=e.angularDrag,this.bounce.setTo(e.bounceX,e.bounceY),this.width=e.width,this.height=e.height,e.explode||(this.on=e.enabled)}}]),t}(Phaser.Particles.Arcade.Emitter);t.default=s,e.exports=t.default}])});